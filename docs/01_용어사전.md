# 크레인 충돌 예측 시스템 - 용어사전

> 이 문서는 시스템에 등장하는 모든 용어를 **비전공자도 이해할 수 있도록** 설명합니다.

---

## 크레인 관련 용어

### 타워크레인 (Tower Crane)

건설현장에서 무거운 자재를 들어올리는 대형 크레인입니다. 높은 기둥(마스트) 위에 긴 팔(붐대)이 달려 있고, 팔 끝에 달린 후크로 물건을 듭니다.

```
                후크
                 │
                 │  (와이어)
                 │
          붐대 끝점 ●
               ╱
              ╱   ← 붐대 (팔)
             ╱
            ╱
           ●  ← 마스트 꼭대기 (회전 중심)
           │
           │  ← 마스트 (기둥)
           │
           │
    ═══════╪═══════  ← 기초 (콘크리트 기반)
          지면
```

### 마스트 (Mast)

크레인의 **수직 기둥** 부분입니다. 콘크리트 기초 위에 세워져 있습니다.

- **영어**: Mast
- **코드에서**: `mast_height` (마스트 높이, 미터 단위)
- **일반적인 높이**: 30m ~ 80m (아파트 10층 ~ 25층 높이)

### 붐대 (Boom)

크레인의 **수평 팔** 부분입니다. 마스트 꼭대기에서 좌우로 회전하고, 위아래로 올릴 수 있습니다.

- **영어**: Boom (또는 Jib)
- **코드에서**: `boom_length` (붐대 길이, 미터 단위)
- **일반적인 길이**: 40m ~ 70m
- **붐대 끝점**: 후크가 달리는 부분, 코드에서 `boom_tip`

### 기초 (Base)

크레인이 세워진 **바닥 위치**입니다. 크레인이 설치되면 움직이지 않는 고정점입니다.

- **코드에서**: `base_x`, `base_y` (미터 단위, 현장 좌표)
- **비유**: 시계의 중심축

---

## 크레인 움직임 관련 용어

### 선회 (Slew)

붐대가 **좌우로 회전**하는 동작입니다. 시계처럼 중심축을 기준으로 수평면에서 돌아갑니다.

```
위에서 내려다본 모습:

          북 (0도)
           │
           │
서 (270도) ─┼─ 동 (90도)
           │
           │
          남 (180도)

붐대가 이렇게 빙글빙글 돕니다
```

- **영어**: Slew (또는 Swing)
- **코드에서**: `slew_angle` (선회각, 도 단위)
- **기준**: 0도 = 북쪽, 시계방향으로 증가
- **범위**: 0도 ~ 360도 (한 바퀴)

### 선회각 (Slew Angle)

붐대가 **현재 어느 방향**을 가리키는지 나타내는 각도입니다.

| 선회각 | 방향 | 나침반 |
|--------|------|--------|
| 0도 | 북쪽 | N |
| 90도 | 동쪽 | E |
| 180도 | 남쪽 | S |
| 270도 | 서쪽 | W |
| 360도 | 다시 북쪽 (= 0도) | N |

- **비유**: 시계 바늘이 가리키는 방향
  - 12시 방향 = 0도
  - 3시 방향 = 90도
  - 6시 방향 = 180도
  - 9시 방향 = 270도

### 선회 속도 (Slew Speed)

붐대가 **1초에 몇 도**씩 회전하는지 나타냅니다.

- **단위**: 도/초 (degrees per second)
- **코드에서**: `slew_speed`
- **양수**: 시계방향 회전
- **음수**: 반시계방향 회전
- **0**: 정지
- **일반적인 속도**: 0.5 ~ 1.0 도/초

> **예시**: 선회 속도가 0.5도/초이면, 1분(60초)에 30도를 회전합니다. 한 바퀴(360도)를 돌려면 12분(720초)이 걸립니다.

### 기복 (Luffing)

붐대를 **위아래로 올리고 내리는** 동작입니다.

```
옆에서 본 모습:

기복각 60도  ╱   ← 많이 올린 상태 (수평거리 짧음)
            ╱
           ╱

기복각 30도  ╱       ← 적당히 올린 상태
            ╱╱
           ╱╱╱

기복각 0도   ────────  ← 완전히 수평 (수평거리 최대)
```

- **영어**: Luffing
- **코드에서**: `luffing_angle` (기복각, 도 단위)
- **기준**: 0도 = 완전히 수평, 각도가 커질수록 위로 올림
- **범위**: 0도 ~ 80도

### 기복각 (Luffing Angle)

붐대가 **수평면에서 얼마나 올라갔는지** 나타내는 각도입니다.

| 기복각 | 상태 | 수평 도달 거리 |
|--------|------|----------------|
| 0도 | 완전히 수평 | 최대 (= 붐대 길이) |
| 30도 | 약간 올림 | 붐대 길이의 87% |
| 45도 | 중간 | 붐대 길이의 71% |
| 60도 | 많이 올림 | 붐대 길이의 50% |
| 80도 | 거의 수직 | 붐대 길이의 17% |

### 작업 반경 (Working Radius)

크레인의 붐대가 **지면에서 닿을 수 있는 거리**입니다. 위에서 내려다보면 원(circle) 모양입니다.

```
위에서 내려다본 모습:

         ╭─────────────╮
        ╱               ╲
       ╱    작업 반경     ╲
      │         ●         │    ← 크레인 기초가 원의 중심
       ╲      (기초)     ╱
        ╲               ╱
         ╰─────────────╯

         ←── 반경 (m) ──→
```

- **코드에서**: `working_radius`, `max_working_radius`
- **최대 작업 반경** = 붐대 길이 (기복각 0도일 때)
- **현재 작업 반경** = 붐대 길이 × cos(기복각)

### 중첩 구역 (Overlap Zone)

두 크레인의 작업 반경이 **겹치는 영역**입니다. 이 구역에서 두 크레인이 동시에 작업하면 충돌 위험이 있습니다.

```
    ╭───────╮
   ╱    A    ╲
  ╱           ╲
 │      ●──────│────────╮
  ╲     기초A ╱ ████████╱  ← 중첩 구역 (██ 표시)
   ╲         ╱████ B ██╱
    ╰───────│────────╯
            ●
          기초B
```

---

## 좌표 관련 용어

### 좌표계 (Coordinate System)

현장의 모든 위치를 **숫자로 표현**하기 위한 기준 체계입니다.

```
         Y (북쪽, 미터)
         │
    100  ┤
         │       ● 크레인B (80, 70)
     70  ┤
         │
     50  ┤
         │
         │
      0  ●───┤───┤───┤───┤───→ X (동쪽, 미터)
       기준점  20  40  60  80
    (원점)
```

- **X축**: 동쪽 방향, 숫자가 클수록 오른쪽
- **Y축**: 북쪽 방향, 숫자가 클수록 위쪽
- **Z축**: 하늘 방향, 숫자가 클수록 높음
- **원점 (0, 0, 0)**: 현장에서 정한 기준점

### 3D 좌표 (3D Coordinates)

공간의 한 지점을 **(X, Y, Z)** 세 개의 숫자로 표현합니다.

- **예시**: (80, 0, 45) = "원점에서 동쪽으로 80m, 북쪽으로 0m, 높이 45m 지점"

### 라디안 (Radian)

각도를 표현하는 **또 다른 단위**입니다. 우리는 보통 "도(degree)"를 쓰지만, 컴퓨터의 수학 함수는 라디안을 사용합니다.

| 도 (우리가 아는 것) | 라디안 (컴퓨터가 아는 것) |
|---------------------|--------------------------|
| 0도 | 0 |
| 30도 | 약 0.524 |
| 45도 | 약 0.785 |
| 90도 | 약 1.571 |
| 180도 | 약 3.142 (π) |
| 360도 | 약 6.283 (2π) |

> **변환 공식**: 라디안 = 도 × (π / 180)
>
> 코드에서는 `math.radians(각도)` 함수가 자동으로 변환해줍니다. 직접 계산할 필요 없습니다.

---

## 충돌 예측 관련 용어

### 충돌 예측 (Collision Prediction)

현재 크레인의 움직임(방향, 속도)이 계속된다면 **미래에 충돌할 가능성이 있는지** 미리 계산하는 것입니다.

- **코드에서**: `_predict_collision()` 함수
- **예측 범위**: 현재로부터 최대 30초 후까지
- **검사 간격**: 0.5초 단위

### 예상 충돌 시간 (Time To Collision, TTC)

현재 속도를 유지했을 때, **몇 초 후에 충돌**하는지 예측한 시간입니다.

- **코드에서**: `time_to_collision`
- **단위**: 초
- **None**: 30초 이내에 충돌 예상 없음
- **예시**: `time_to_collision = 8.5` → "8.5초 후 충돌 예상"

### 안전 여유 거리 (Safety Margin)

두 크레인의 붐대가 **이 거리 이내로 접근하면 "충돌 가능"**으로 판단하는 기준 거리입니다.

- **현재 설정**: 2.0m
- **코드에서**: `SAFETY_MARGIN_METERS`
- **의미**: 실제로 부딪히지 않아도, 2m 이내로 접근하면 위험으로 판단

---

## 위험 등급 관련 용어

### 위험 등급 (Alert Level)

현재 상황이 **얼마나 위험한지** 4단계로 구분합니다.

| 등급 | 영어 | 색상 | 의미 |
|------|------|------|------|
| **정상** | NORMAL | 초록 (#00CC00) | 안전, 정상 작업 가능 |
| **주의** | CAUTION | 노랑 (#FFD700) | 주의 필요, 운전자에게 알림 |
| **경고** | WARNING | 주황 (#FF8C00) | 위험 접근, 속도 줄일 것 |
| **위험** | DANGER | 빨강 (#FF0000) | 즉시 정지, 비상 상황 |

---

## 소프트웨어 관련 용어

### FastAPI

Python 언어로 만든 **웹 서버 프레임워크**입니다. 웹 브라우저에서 접속하면 관제 화면을 보여주고, 크레인 데이터를 처리합니다.

- **비유**: 레스토랑의 주방. 주문(요청)을 받아서 요리(처리)를 하고 음식(응답)을 내보냅니다.

### WebSocket

서버와 브라우저 사이의 **실시간 양방향 통신** 기술입니다.

- **일반 HTTP**: 브라우저가 물어봐야 서버가 대답 (질문 → 응답)
- **WebSocket**: 한번 연결하면 서버가 알아서 새 정보를 보내줌 (실시간)
- **비유**: 일반 HTTP = 택배 (주문해야 배달), WebSocket = 실시간 뉴스 속보 (알아서 전달)

### Three.js

웹 브라우저에서 **3D 그래픽**을 그리는 JavaScript 라이브러리입니다. 크레인의 3D 모습을 화면에 표시합니다.

### REST API

웹을 통해 **데이터를 주고받는 규칙**입니다.

- **GET**: 데이터 조회 (예: 크레인 상태 보기)
- **POST**: 데이터 변경 (예: 크레인 속도 바꾸기)
- **예시**: `GET /api/cranes` = "모든 크레인 상태를 알려줘"

### 시뮬레이션 (Simulation)

실제 크레인 없이 **컴퓨터 안에서 가상으로** 크레인 동작을 재현하는 것입니다.

- **용도**: 실제 장비 없이 충돌 예측 로직을 테스트
- **코드에서**: `simulator/engine.py`, `simulator/scenarios.py`

### 시나리오 (Scenario)

미리 정의된 **상황 설정**입니다. "이런 상황에서 시스템이 올바르게 경고하는가?"를 테스트합니다.

| 시나리오 | 상황 |
|----------|------|
| 정상 운행 | 3대가 안전하게 작업 |
| 접근 상황 | 2대가 서로 다가가는 중 |
| 정면 충돌 | 2대가 서로를 마주봄 |
| 교차 통과 | 붐대가 같은 영역 지나감 |
| 다중 혼잡 | 4대가 좁은 공간에서 동시 작업 |

---

## 센서 관련 용어 (현장 적용 시)

### 엔코더 (Encoder)

**회전 각도를 측정**하는 센서입니다. 크레인의 선회각을 측정하는 데 사용합니다.

- **비유**: 자동차의 속도계와 비슷하지만, 회전량을 측정

### 경사계 (Inclinometer)

**기울기를 측정**하는 센서입니다. 붐대의 기복각을 측정하는 데 사용합니다.

### RTK-GPS

일반 GPS보다 훨씬 정밀한 **위치 측정 시스템**입니다.

| GPS 종류 | 정밀도 |
|----------|--------|
| 스마트폰 GPS | 3~5m 오차 |
| 일반 GPS 모듈 | 1~2m 오차 |
| **RTK-GPS** | **2cm 오차** |

### 엣지 장치 (Edge Device)

각 크레인에 설치하는 **소형 컴퓨터**입니다. 센서 데이터를 수집하고 중앙 서버로 전송합니다.

- **예시**: 오렌지파이5, 라즈베리파이
- **비유**: 각 크레인에 붙어있는 "연락담당"

### PLC (Programmable Logic Controller)

크레인 동작을 제어하는 **산업용 컨트롤러**입니다. 여기서 선회각, 기복각 등의 데이터를 읽어올 수 있습니다.

### Modbus / OPC-UA

산업용 장비끼리 **데이터를 주고받는 통신 규약**(프로토콜)입니다.

- **Modbus**: 오래되었지만 간단하고 널리 쓰임
- **OPC-UA**: 최신 표준, 보안 기능 포함
